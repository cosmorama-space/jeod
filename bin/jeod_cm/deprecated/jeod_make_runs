#!/bin/bash
#
# jeod_make_runs : script to run all RUN_* under a directory 
#                  or a specified RUN under a directory
#           Usage: run_set <RUN_NAME>

# temp variable to store cwd patd
cdir=`pwd`

rname=${1:-RUN\*}
[ ! -d SET_test ] && { echo -e "No SET_test in ${cdir#$JEOD_HOME/} ..." >> $JEOD_HOME/run_error; exit 55;}
runs=`find SET_test -name $rname`
[ ${#runs} == 0 ] && { echo -e "\nERROR: !! RUN ${cdir#$JEOD_HOME/}/$1 does not exist !! ... " >> $JEOD_HOME/run_error; }

# assign simulation executable name to $sim
#sim=`find . -name S_main_\* | cut -c3-`

# Runninng sims
for ii in $runs; do
#   if [ -n $sim ]; then
# check if there is an input file in a run
      [ ! -e ${ii}/input ] && { echo -e "\nNo input file in ${ii#$JEOD_HOME/} ... " >> $JEOD_HOME/run_error; continue; } 

      echo -e "${cdir#$JEOD_HOME/} $ii"
#   fi
done
