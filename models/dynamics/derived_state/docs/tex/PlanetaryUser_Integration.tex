%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Purpose:  Integration part of User's Guide for the Planetary model
%
% 
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

 \section{Integration}

Including the \PlanetaryDesc\ is relatively straightforward.

 \subsection{Generating the S\_define}

Conventional practice would add the \PlanetaryDesc\ to the vehicle object, or (if one exists) to a separate relative-state object at the end of the S\_define file.  When adding the state to a specific vehicle, care must be taken to ensure that the calls to update the state occur after the planet position has been generated from the ephemerides, and the vehicle position integrated.  There is no internal check that this ordering is achieved, the responsibility for ensuring this lies entirely on the Integrator.

The instance of \textit{PlanetaryDerivedState} needs to be defined, the model initialized, and a routine update scheduled.  A simple example of how this may look is found in the \textref{Analysis}{sec:planetaryuseranalysis} section.  Simple example simulations are found in the 
\textit{derived\_state/verif/Planetary} verification simulations released with \JEODid.

\subsection{Generating the Input File}
The input file (or Modified Data file) must contain the name of the planet, identified as \textit{reference\_name}.

In the input file, the user may specify which planet-centered, planet-fixed reference frame (default or alternate) to use as the basis of the position calculations. Note: this only works with Planets that have an alternate reference frame defined.
\begin{verbatim}
example_of_rel_state_object.example_of_planetary_state.set_use_alt_pfix(False);

\end{verbatim}
or
\begin{verbatim}
example_of_rel_state_object.example_of_planetary_state.set_use_alt_pfix(True);

\end{verbatim}

See the \textref{Analysis}{sec:planetaryuseranalysis} section for an example of how the input data may appear.

\subsection{Logging the Data}
See the \textref{Analysis}{sec:planetaryuseranalysis} section for a list of available output data.
